# –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ **ca65** (NES/6502), –≥–¥–µ –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ —Å –ø—Ä–∏–º–µ—Ä–æ–º –ø—Ä–æ–≥—Ä–∞–º–º—ã.  

## –ü–æ–¥–≥–æ—Ç–æ–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤

–Ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª [–¥–∞–Ω–Ω—ã–π –≥–∞–π–¥](https://www.emu-land.net/forum/index.php?topic=88133.0). –í –∫–∞—á–µ—Å—Ç–≤–µ —ç–º—É–ª—è—Ç–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª [FCEUX](https://fceux.com/web/home.html).

## **–≠—Ç–∞–ø 1: –û—Å–Ω–æ–≤—ã –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ 6502**
**–¶–µ–ª—å:** –ü–æ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ 6502, —Ä–µ–≥–∏—Å—Ç—Ä—ã –∏ –±–∞–∑–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.  
- –û–±—è–∑–∞–Ω–∞ –±—ã—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ –∏ —Ç—Ä–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–µ–∫—Ç–æ—Ä–∞

### **–ü—Ä–æ–≥—Ä–∞–º–º–∞: ¬´–ü—Ä–æ—Å—Ç–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ä–µ–≥–∏—Å—Ç—Ä–æ–º¬ª**
**–û–ø–∏—Å–∞–Ω–∏–µ:**  
- –ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ `A`   
- –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: `LDA`, `STA`, `ADC`, `JMP`  

---

## **–≠—Ç–∞–ø 2: –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç–µ–∫–æ–º, –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, —É—Å–ª–æ–≤–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä**
**–¶–µ–ª—å:** –ù–∞—É—á–∏—Ç—å—Å—è —Å–æ—Ö—Ä–∞–Ω—è—Ç—å/–∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–µ–∫, –≤—ã–ø–æ–ª–Ω—è—Ç—å –±–∞–∑–æ–≤—ã–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### **–ü—Ä–æ–≥—Ä–∞–º–º–∞: ¬´–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä¬ª**
**–û–ø–∏—Å–∞–Ω–∏–µ:**   
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–µ–∫ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è  
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏: —Å–ª–æ–∂–µ–Ω–∏—è, –≤—ã—á–∏—Ç–∞–Ω–∏—è 
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ (–ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏)

---
# –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...
## **üîπ –≠—Ç–∞–ø 3: –ì—Ä–∞—Ñ–∏–∫–∞ NES (PPU)**
**–¶–µ–ª—å:** –ù–∞—É—á–∏—Ç—å—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–∏–¥–µ–æ–ø–∞–º—è—Ç—å—é –∏ –ø–∞–ª–∏—Ç—Ä–æ–π.  

### **–ü—Ä–æ–≥—Ä–∞–º–º–∞ 3: ¬´–¶–≤–µ—Ç–Ω–æ–π —ç–∫—Ä–∞–Ω¬ª**
**–û–ø–∏—Å–∞–Ω–∏–µ:**  
- –ó–∞–ª–∏—Ç—å —ç–∫—Ä–∞–Ω –æ–¥–Ω–∏–º —Ü–≤–µ—Ç–æ–º —á–µ—Ä–µ–∑ PPU ($2000‚Äì$2007).  

**–ö–æ–¥:**  
```asm
.segment "HEADER"
  .byte "NES", $1A, 1, 1, 0, 0

.segment "CODE"
RESET:
  LDA #%10000000  ; –í–∫–ª—é—á–∏—Ç—å NMI
  STA $2000
  LDA #%00011110  ; –í–∫–ª—é—á–∏—Ç—å —Ñ–æ–Ω
  STA $2001

  ; –ó–∞–ª–∏–≤–∫–∞ —Ñ–æ–Ω–∞ —Ü–≤–µ—Ç–æ–º $20 (–±–µ–ª—ã–π)
  LDA $2002      ; –°–±—Ä–æ—Å PPU
  LDA #$3F
  STA $2006
  LDA #$00
  STA $2006
  LDA #$20
  STA $2007

loop:
  JMP loop       ; –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
```

**–ß—Ç–æ –∏–∑—É—á–∏—Ç—å:**  
- –†–µ–≥–∏—Å—Ç—Ä—ã PPU: `$2000` (Control), `$2001` (Mask), `$2006/2007` (VRAM).  
- –ü–∞–ª–∏—Ç—Ä–∞ ($3F00‚Äì$3F1F).  

---

## **üîπ –≠—Ç–∞–ø 4: –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö (–≥–µ–π–º–ø–∞–¥)**
**–¶–µ–ª—å:** –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫.  

### **–ü—Ä–æ–≥—Ä–∞–º–º–∞ 4: ¬´–î–≤–∏–∂—É—â–∏–π—Å—è –ø–∏–∫—Å–µ–ª—å¬ª**
**–û–ø–∏—Å–∞–Ω–∏–µ:**  
- –ü–µ—Ä–µ–º–µ—â–∞—Ç—å —Ç–æ—á–∫—É –ø–æ —ç–∫—Ä–∞–Ω—É —Å –ø–æ–º–æ—â—å—é –≥–µ–π–º–ø–∞–¥–∞ ($4016).  

**–ö–æ–¥ (—Ñ—Ä–∞–≥–º–µ–Ω—Ç):**  
```asm
ReadJoypad:
  LDA #1
  STA $4016      ; –ù–∞—á–∞—Ç—å –æ–ø—Ä–æ—Å
  LDA #0
  STA $4016
  LDA $4016      ; –ö–Ω–æ–ø–∫–∞ A
  AND #1
  BNE MoveRight  ; –ï—Å–ª–∏ –Ω–∞–∂–∞—Ç–∞ ‚Äî –¥–≤–∏–≥–∞–µ–º—Å—è
```

**–ß—Ç–æ –∏–∑—É—á–∏—Ç—å:**  
- –ü–æ—Ä—Ç—ã –≤–≤–æ–¥–∞ ($4016, $4017).  
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–ª–∞–≥–æ–≤.  

---

## **üîπ –≠—Ç–∞–ø 5: –ê–Ω–∏–º–∞—Ü–∏—è –∏ —Ç–∞–π–º–µ—Ä—ã**
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç—É—é –∞–Ω–∏–º–∞—Ü–∏—é —á–µ—Ä–µ–∑ NMI.  

### **–ü—Ä–æ–≥—Ä–∞–º–º–∞ 5: ¬´–ú–∏–≥–∞—é—â–∏–π —Ç–µ–∫—Å—Ç¬ª**
**–û–ø–∏—Å–∞–Ω–∏–µ:**  
- –í—ã–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç "HELLO" –∏ –º–∏–≥–∞—Ç—å –∏–º –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É.  

**–ö–æ–¥:**  
```asm
NMI:
  INC frame_cnt  ; –°—á—ë—Ç—á–∏–∫ –∫–∞–¥—Ä–æ–≤
  LDA frame_cnt
  CMP #60        ; 60 –∫–∞–¥—Ä–æ–≤ = 1 —Å–µ–∫ (NTSC)
  BNE Exit
  LDA #0
  STA frame_cnt
  JSR ToggleText ; –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Ç–µ–∫—Å—Ç
Exit:
  RTI
```

**–ß—Ç–æ –∏–∑—É—á–∏—Ç—å:**  
- –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ VBlank (NMI).  
- –¢–∞–π–º–∏–Ω–≥–∏ NTSC/PAL.  

---

## **üîπ –≠—Ç–∞–ø 6: –ó–≤—É–∫ (APU)**
**–¶–µ–ª—å:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–≤—É–∫–æ–≤.  

### **–ü—Ä–æ–≥—Ä–∞–º–º–∞ 6: ¬´–ë–∏–ø-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä¬ª**
**–û–ø–∏—Å–∞–Ω–∏–µ:**  
- –ò–∑–¥–∞—Ç—å –∑–≤—É–∫ —á–µ—Ä–µ–∑ APU ($4000‚Äì$4013).  

**–ö–æ–¥:**  
```asm
PlayBeep:
  LDA #%10011111  ; –ì—Ä–æ–º–∫–æ—Å—Ç—å + –≤–æ–ª–Ω–∞
  STA $4000
  LDA #$FF        ; –ß–∞—Å—Ç–æ—Ç–∞
  STA $4002
  LDA #$00
  STA $4003
  RTS
```

**–ß—Ç–æ –∏–∑—É—á–∏—Ç—å:**  
- –†–µ–≥–∏—Å—Ç—Ä—ã APU: `$4000` (Pulse 1), `$4002/4003` (—á–∞—Å—Ç–æ—Ç–∞).  

---

## **üîπ –≠—Ç–∞–ø 7: –°–±–æ—Ä–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞**
**–¶–µ–ª—å:** –ù–∞—É—á–∏—Ç—å—Å—è –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥.  

### **–ü—Ä–æ–≥—Ä–∞–º–º–∞ 7: ¬´–ü–æ–ª–Ω—ã–π Hello World¬ª**
**–û–ø–∏—Å–∞–Ω–∏–µ:**  
- –í—ã–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç –Ω–∞ —ç–∫—Ä–∞–Ω, –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å NMI –∏ —Å–æ–±—Ä–∞—Ç—å —á–µ—Ä–µ–∑ `ca65/ld65`.  

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:**  
```
/hello/
  ‚îú‚îÄ‚îÄ main.s      ; –ö–æ–¥
  ‚îú‚îÄ‚îÄ nes.cfg     ; –ö–æ–Ω—Ñ–∏–≥ –ª–∏–Ω–∫–µ—Ä–∞
  ‚îî‚îÄ‚îÄ Makefile    ; –ê–≤—Ç–æ—Å–±–æ—Ä–∫–∞
```

**–ö–æ–º–∞–Ω–¥—ã:**  
```sh
ca65 main.s -o main.o
ld65 -C nes.cfg main.o -o game.nes
```

---

## **üîπ –ò—Ç–æ–≥–æ–≤—ã–π –ø—É—Ç—å**
1. **–ë–∞–∑–æ–≤—ã–π 6502** ‚Üí –ú–∏–≥–∞—é—â–∏–π —Å–≤–µ—Ç–æ–¥–∏–æ–¥.  
2. **–ü–∞–º—è—Ç—å/—Å—Ç–µ–∫** ‚Üí –°—É–º–º–∞—Ç–æ—Ä.  
3. **–ì—Ä–∞—Ñ–∏–∫–∞** ‚Üí –¶–≤–µ—Ç–Ω–æ–π —ç–∫—Ä–∞–Ω.  
4. **–í–≤–æ–¥** ‚Üí –î–≤–∏–∂—É—â–∏–π—Å—è –ø–∏–∫—Å–µ–ª—å.  
5. **–ê–Ω–∏–º–∞—Ü–∏—è** ‚Üí –ú–∏–≥–∞—é—â–∏–π —Ç–µ–∫—Å—Ç.  
6. **–ó–≤—É–∫** ‚Üí –ë–∏–ø-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä.  
7. **–°–±–æ—Ä–∫–∞** ‚Üí Hello World.  

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –±—Ä–∞—Ç—å—Å—è –∑–∞ **–∏–≥—Ä—ã** (–¥–≤–∏–∂–æ–∫ —Å–∫—Ä–æ–ª–ª–∏–Ω–≥–∞, —Å–ø—Ä–∞–π—Ç—ã, –∫–æ–ª–ª–∏–∑–∏–∏).  

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**  
- –≠–º—É–ª—è—Ç–æ—Ä: **FCEUX** / Mesen.  
- –û—Ç–ª–∞–¥—á–∏–∫: **NESST** (–¥–ª—è FCEUX).  
- –ì—Ä–∞—Ñ–∏–∫–∞: **YY-CHR**.  

–£–¥–∞—á–∏ –≤ –æ—Å–≤–æ–µ–Ω–∏–∏ NES! üéÆ